{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "menu",
  "type": "registry:component",
  "dependencies": ["lucide-react", "sonner"],
  "registryDependencies": [
    "@shadcn/button",
    "@shadcn/dropdown-menu",
    "@wallet-kit/connect",
    "@wallet-kit/error",
    "@wallet-kit/icon",
    "@wallet-kit/ellipsify",
    "@wallet-kit/use-wallet"
  ],
  "files": [
    {
      "path": "src/registry/default/ui/wallet/menu.tsx",
      "content": "\"use client\";\n\nimport type { UiWallet, UiWalletAccount } from \"@wallet-standard/react\";\nimport { CopyIcon, LogOutIcon } from \"lucide-react\";\nimport type React from \"react\";\nimport { useMemo, useState } from \"react\";\nimport { toast } from \"sonner\";\nimport {\n  useWallet,\n  useWalletAccount,\n  useWalletConnection,\n} from \"@/registry/default/hooks/use-wallet\";\nimport { ellipsify } from \"@/registry/default/lib/ellipsify\";\nimport { Button } from \"@/registry/default/ui/button\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from \"@/registry/default/ui/dropdown-menu\";\nimport { ConnectWallet } from \"@/registry/default/ui/wallet/connect\";\nimport {\n  NO_ERROR,\n  WalletErrorDialog,\n} from \"@/registry/default/ui/wallet/error\";\nimport { WalletIcon } from \"@/registry/default/ui/wallet/icon\";\n\nfunction WalletMenuContent({\n  account,\n  selectedWallet,\n  onDisconnect,\n  onError,\n  setDropdownOpen,\n}: {\n  account: UiWalletAccount;\n  selectedWallet: UiWallet;\n  onDisconnect: () => void;\n  onError: (error: unknown) => void;\n  setDropdownOpen: (open: boolean) => void;\n}) {\n  const { copy } = useWallet();\n  const { disconnect, isDisconnecting } = useWalletConnection({\n    wallet: selectedWallet,\n  });\n\n  const handleCopy = () => {\n    try {\n      copy();\n      toast.success(\"Address copied to clipboard\");\n    } catch {\n      toast.error(\"Failed to copy address\");\n    }\n  };\n\n  const handleDisconnect = async () => {\n    try {\n      await disconnect();\n      onDisconnect();\n      setDropdownOpen(false);\n    } catch (err) {\n      onError(err);\n    }\n  };\n\n  return (\n    <>\n      <DropdownMenuLabel className=\"flex items-center gap-2\">\n        <WalletIcon className=\"rounded-sm\" wallet={selectedWallet} />\n        <div className=\"flex flex-col\">\n          <span>{selectedWallet.name}</span>\n          <span className=\"text-muted-foreground text-xs\">Connected</span>\n        </div>\n      </DropdownMenuLabel>\n      <DropdownMenuSeparator />\n      <DropdownMenuItem onClick={handleCopy}>\n        <CopyIcon />\n        <span className=\"font-mono\">{ellipsify(account.address, 8)}</span>\n      </DropdownMenuItem>\n      <DropdownMenuSeparator />\n      <DropdownMenuItem\n        disabled={isDisconnecting}\n        onClick={handleDisconnect}\n        variant=\"destructive\"\n      >\n        <LogOutIcon />\n        <span>{isDisconnecting ? \"Disconnecting...\" : \"Disconnect\"}</span>\n      </DropdownMenuItem>\n    </>\n  );\n}\n\nfunction WalletMenu({\n  className,\n  children,\n  variant = \"default\",\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { wallets } = useWallet();\n  const { account, setAccount } = useWalletAccount();\n  const [error, setError] = useState<symbol>(NO_ERROR);\n  const [dropdownOpen, setDropdownOpen] = useState(false);\n\n  const selectedWallet = useMemo(() => {\n    if (!account) {\n      return;\n    }\n    return wallets.find((wallet) =>\n      wallet.accounts.some((acc) => acc.address === account.address)\n    );\n  }, [account, wallets]);\n\n  const handleError = (err: unknown) => {\n    setError(err as symbol);\n  };\n\n  if (!account) {\n    return <ConnectWallet className={className} variant={variant} {...props} />;\n  }\n\n  if (!selectedWallet) {\n    return null;\n  }\n\n  return (\n    <>\n      <DropdownMenu onOpenChange={setDropdownOpen} open={dropdownOpen}>\n        <DropdownMenuTrigger asChild>\n          <Button className={className} variant={variant} {...props}>\n            <WalletIcon className=\"size-4 rounded-sm\" wallet={selectedWallet} />\n            <span className=\"font-mono text-sm\">\n              {ellipsify(account.address, 4)}\n            </span>\n          </Button>\n        </DropdownMenuTrigger>\n        <DropdownMenuContent>\n          <WalletMenuContent\n            account={account}\n            onDisconnect={() => setAccount(undefined)}\n            onError={handleError}\n            selectedWallet={selectedWallet}\n            setDropdownOpen={setDropdownOpen}\n          />\n        </DropdownMenuContent>\n      </DropdownMenu>\n      {error !== NO_ERROR && (\n        <WalletErrorDialog error={error} onClose={() => setError(NO_ERROR)} />\n      )}\n    </>\n  );\n}\n\nexport { WalletMenu };\n",
      "type": "registry:component",
      "target": "components/wallet/menu.tsx"
    }
  ],
  "categories": ["wallet"]
}
